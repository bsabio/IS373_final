<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{% if title %}{{ title }} | {{ site.title }}{% else %}{{ site.title }}{% endif %}</title>
    <meta name="description" content="{{ description or site.description }}" />
    
    <!-- DNS Prefetch and Preconnect for Performance -->
    <link rel="dns-prefetch" href="https://cdn.sanity.io" />
    <link rel="preconnect" href="https://cdn.sanity.io" crossorigin />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="{{ site.url }}{{ page.url }}" />
    
    <!-- Preload critical CSS -->
    <link rel="preload" href="{{ '/assets/css/global.css' | url }}" as="style" />
    <link rel="stylesheet" href="{{ '/assets/css/global.css' | url }}" />

    <!-- Open Graph -->
    <meta property="og:title" content="{% if title %}{{ title }}{% else %}{{ site.title }}{% endif %}" />
    <meta property="og:description" content="{{ description or site.description }}" />
    <meta property="og:url" content="{{ site.url }}{{ page.url }}" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="{{ site.title }}" />
    
    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="{% if title %}{{ title }}{% else %}{{ site.title }}{% endif %}" />
    <meta name="twitter:description" content="{{ description or site.description }}" />
  </head>
  <body>
    <!-- Skip to main content link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <header role="banner" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100;">
      <nav aria-label="Primary navigation" style="max-width: 1400px; margin: 0 auto; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center;">
        <div class="nav-brand" style="display: flex; align-items: center; gap: 0.5rem;">
          <span style="font-size: 1.5rem; font-weight: 900; color: white; letter-spacing: -0.02em;">{{ site.title }}</span>
        </div>
        <div class="nav-links" style="display: flex; gap: 2rem; align-items: center;">
          <a href="{{ '/' | url }}" style="color: white; text-decoration: none; font-weight: 600; text-transform: uppercase; font-size: 0.875rem; letter-spacing: 0.05em; transition: opacity 0.3s ease; opacity: 0.9;">Home</a>
          <a href="{{ '/gallery/' | url }}" style="color: white; text-decoration: none; font-weight: 600; text-transform: uppercase; font-size: 0.875rem; letter-spacing: 0.05em; transition: opacity 0.3s ease; opacity: 0.9;">Gallery</a>
          <a href="{{ '/submission/' | url }}" style="color: white; text-decoration: none; font-weight: 600; text-transform: uppercase; font-size: 0.875rem; letter-spacing: 0.05em; transition: opacity 0.3s ease; opacity: 0.9;">Submit</a>
          <a href="{{ '/review/' | url }}" style="background: rgba(255,255,255,0.2); padding: 0.5rem 1rem; border-radius: 4px; color: white; text-decoration: none; font-weight: 700; text-transform: uppercase; font-size: 0.875rem; letter-spacing: 0.05em; transition: all 0.3s ease; border: 2px solid rgba(255,255,255,0.3);">Review</a>
        </div>
      </nav>
    </header>

    <style>
      .nav-links a:hover {
        opacity: 1;
      }
      .nav-links a:last-child:hover {
        background: rgba(255,255,255,0.3);
        transform: translateY(-2px);
      }
      @media (max-width: 768px) {
        nav {
          flex-direction: column;
          gap: 1rem;
          padding: 1rem !important;
        }
        .nav-links {
          flex-wrap: wrap;
          justify-content: center;
          gap: 1rem !important;
        }
      }
    </style>

    <main id="main-content" role="main">
      {{ content | safe }}
    </main>

    <footer role="contentinfo">
      <p>&copy; <span id="current-year"></span> {{ site.title }} | <a href="{{ '/pages/privacy/' | url }}">Privacy Policy</a> | <a href="#" onclick="window.openCookiePreferences(); return false;">Cookie Preferences</a></p>
      
      <!-- Schema.org Organization Structured Data -->
      <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "{{ site.title }}",
        "url": "{{ site.url }}",
        "description": "{{ site.description }}",
        "logo": "{{ site.url }}/assets/logo.png"
      }
      </script>
    </footer>
    
    <!-- Cookie Consent Banner -->
    {% include "../includes/cookie-consent.njk" %}
    
    <!-- Set current year -->
    <script>
      document.getElementById('current-year').textContent = new Date().getFullYear();
    </script>
  </body>
</html>
