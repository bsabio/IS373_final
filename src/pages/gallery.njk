---
title: Design Gallery
layout: base.njk
permalink: "/gallery/index.html"
---

<style>
.gallery-hero {
  margin: 2rem 0 3rem;
  text-align: center;
}
.gallery-hero h1 {
  font-size: 3rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
}
.gallery-hero p {
  font-size: 1.25rem;
  color: #666;
}

.section-heading {
  font-size: 2rem;
  font-weight: 700;
  margin: 3rem 0 1.5rem;
  border-bottom: 3px solid #000;
  padding-bottom: 0.5rem;
}

.card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 2rem;
  margin: 2rem 0;
}

.card {
  background: #fff;
  border: 2px solid #000;
  padding: 1.5rem;
  transition: transform 0.2s, box-shadow 0.2s;
}
.card:hover {
  transform: translateY(-4px);
  box-shadow: 8px 8px 0 rgba(0,0,0,0.1);
}

.card h3 {
  font-size: 1.5rem;
  font-weight: 700;
  margin: 0 0 0.75rem;
}
.card p {
  margin: 0 0 1rem;
  line-height: 1.6;
}
.card a {
  color: #000;
  text-decoration: underline;
  font-weight: 600;
}

.submission-card {
  background: #fff;
  border: 2px solid #000;
  overflow: hidden;
  transition: transform 0.2s, box-shadow 0.2s;
}
.submission-card:hover {
  transform: translateY(-4px);
  box-shadow: 8px 8px 0 rgba(0,0,0,0.1);
}
.submission-card img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  display: block;
  border-bottom: 2px solid #000;
}
.submission-card-body {
  padding: 1.25rem;
}
.submission-card h4 {
  font-size: 1.25rem;
  font-weight: 700;
  margin: 0 0 0.5rem;
}
.submission-card .meta {
  font-size: 0.9rem;
  color: #666;
  margin-bottom: 0.75rem;
}
.submission-card a {
  color: #000;
  text-decoration: underline;
  font-weight: 600;
}

.loading, .error {
  text-align: center;
  padding: 2rem;
  font-size: 1.125rem;
}
.error { color: crimson; }
</style>

<div class="gallery-hero">
  <h1>Design Gallery</h1>
  <p>Explore design movements and student submissions</p>
</div>

<section>
  <h2 class="section-heading">Design Styles</h2>
  <div id="stylesContainer" class="card-grid">
    <p class="loading">Loading design styles…</p>
  </div>
</section>

<section>
  <h2 class="section-heading">Approved Student Submissions</h2>
  <div id="submissionsContainer" class="card-grid">
    <p class="loading">Loading submissions…</p>
  </div>
</section>

<script>
const API_ROOT = (typeof window.API_ROOT !== 'undefined') ? window.API_ROOT : ''

async function loadStyles() {
  const container = document.getElementById('stylesContainer')
  try {
    const r = await fetch(API_ROOT + '/api/styles')
    if (!r.ok) throw new Error('Failed to load styles')
    const data = await r.json()
    const styles = data.styles || []
    
    if (!styles.length) {
      container.innerHTML = '<p class="loading">No design styles available yet.</p>'
      return
    }
    
    container.innerHTML = styles.map(s => `
      <article class="card">
        <h3><a href="${s.slug ? '/gallery/' + s.slug + '/' : '#'}">${escapeHtml(s.title)}</a></h3>
        <p>${s.description ? escapeHtml(s.description) : 'Learn about this design movement.'}</p>
      </article>
    `).join('')
  } catch (err) {
    console.error(err)
    container.innerHTML = '<p class="error">Error loading design styles.</p>'
  }
}

async function loadSubmissions() {
  const container = document.getElementById('submissionsContainer')
  try {
    const r = await fetch(API_ROOT + '/api/approved-submissions')
    if (!r.ok) throw new Error('Failed to load submissions')
    const data = await r.json()
    const items = data.submissions || []
    
    if (!items.length) {
      container.innerHTML = '<p class="loading">No approved submissions yet.</p>'
      return
    }
    
    container.innerHTML = items.map(item => `
      <article class="submission-card">
        ${item.screenshot?.asset?.url ? `<img src="${item.screenshot.asset.url}" alt="Screenshot by ${escapeHtml(item.name)}" />` : ''}
        <div class="submission-card-body">
          <h4>${escapeHtml(item.name)}</h4>
          <p class="meta">Style: ${item.style?.title ? escapeHtml(item.style.title) : 'Unknown'}</p>
          <p><a href="${item.url}" target="_blank" rel="noopener">View Demo →</a></p>
        </div>
      </article>
    `).join('')
  } catch (err) {
    console.error(err)
    container.innerHTML = '<p class="error">Error loading submissions.</p>'
  }
}

function escapeHtml(str) {
  const div = document.createElement('div')
  div.textContent = str
  return div.innerHTML
}

loadStyles()
loadSubmissions()
</script>
